package parsers

import org.junit.Test

class DateParserTests {
    private val defaultParser = DateParser()
    private val customParser = DateParser(listOf("MM/dd/yyyy"))

    @Test
    fun validStringsAreConvertedToDates() {
        listOf(
            "01/01/2020", "01/31/2020", "2020-01-01", "2020-01-31",
            "02/01/2020", "02/29/2020", "2020-02-01", "2020-02-29",
            "03/01/2020", "03/31/2020", "2020-03-01", "2020-03-31",
            "04/01/2020", "04/30/2020", "2020-04-01", "2020-04-30",
            "05/01/2020", "05/31/2020", "2020-05-01", "2020-05-31",
            "06/01/2020", "06/30/2020", "2020-06-01", "2020-06-30",
            "07/01/2020", "07/31/2020", "2020-07-01", "2020-07-31",
            "08/01/2020", "08/31/2020", "2020-08-01", "2020-08-31",
            "09/01/2020", "09/30/2020", "2020-09-01", "2020-09-30",
            "10/01/2020", "10/31/2020", "2020-10-01", "2020-10-31",
            "11/01/2020", "11/30/2020", "2020-11-01", "2020-11-30",
            "12/01/2020", "12/31/2020", "2020-12-01", "2020-12-31"
        ).map(defaultParser::parse).forEach { assert(it != null) }

        listOf(
            "01/01/2020", "01/31/2020",
            "02/01/2020", "02/29/2020",
            "03/01/2020", "03/31/2020",
            "04/01/2020", "04/30/2020",
            "05/01/2020", "05/31/2020",
            "06/01/2020", "06/30/2020",
            "07/01/2020", "07/31/2020",
            "08/01/2020", "08/31/2020",
            "09/01/2020", "09/30/2020",
            "10/01/2020", "10/31/2020",
            "11/01/2020", "11/30/2020",
            "12/01/2020", "12/31/2020"
        ).map(customParser::parse).forEach { assert(it != null) }
    }

    @Test
    fun invalidStringsAreConvertedToNull() {
        listOf(
            "", "Hello", "12345", "123.45", "true", "false",
            "01/00/2020", "01/32/2020", "2020-01-00", "2020-01-32",
            "02/00/2020", "02/30/2020", "2020-02-00", "2020-02-30",
            "03/00/2020", "03/32/2020", "2020-03-00", "2020-03-32",
            "04/00/2020", "04/31/2020", "2020-04-00", "2020-04-31",
            "05/00/2020", "05/32/2020", "2020-05-00", "2020-05-32",
            "06/00/2020", "06/31/2020", "2020-06-00", "2020-06-31",
            "07/00/2020", "07/32/2020", "2020-07-00", "2020-07-32",
            "08/00/2020", "08/32/2020", "2020-08-00", "2020-08-32",
            "09/00/2020", "09/31/2020", "2020-09-00", "2020-09-31",
            "10/00/2020", "10/32/2020", "2020-10-00", "2020-10-32",
            "11/00/2020", "11/31/2020", "2020-11-00", "2020-11-31",
            "12/00/2020", "12/32/2020", "2020-12-00", "2020-12-32",
            "00/01/2020", "13/01/2020", "2020-00-01", "2020-13-01",
            "01-01-2020", "24/12/2020", "Hello", "12345", "123.45", "12/23"
        ).map(defaultParser::parse).forEach { assert(it == null) }

        listOf(
            "", "Hello", "12345", "123.45", "true", "false",
            "01/00/2020", "01/32/2020",
            "02/00/2020", "02/30/2020",
            "03/00/2020", "03/32/2020",
            "04/00/2020", "04/31/2020",
            "05/00/2020", "05/32/2020",
            "06/00/2020", "06/31/2020",
            "07/00/2020", "07/32/2020",
            "08/00/2020", "08/32/2020",
            "09/00/2020", "09/31/2020",
            "10/00/2020", "10/32/2020",
            "11/00/2020", "11/31/2020",
            "12/00/2020", "12/32/2020",
            "00/01/2020", "13/01/2020",
            "01-01-2020", "24/12/2020", "2020-01-01"
        ).map(customParser::parse).forEach { assert(it == null) }
    }
}